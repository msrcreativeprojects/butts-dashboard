<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Join the Waitlist - BUTTS IN SEATS</title>
  
  <!-- Four-pointed star favicon -->
  <link rel="icon" href="/favicon.svg" type="image/svg+xml">
  <link rel="apple-touch-icon" href="/favicon.svg">
  
  <!-- Open Graph / Social Media Preview -->
  <meta property="og:type" content="website">
  <meta property="og:title" content="Join the Waitlist - BUTTS IN SEATS">
  <meta property="og:description" content="Add your butts to the Broadway attendance count - join the waitlist!">
  <meta property="og:url" content="https://buttsinseats.xyz/waitlist">
  
  <!-- Twitter Card -->
  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Join the Waitlist - BUTTS IN SEATS">
  <meta name="twitter:description" content="Add your butts to the Broadway attendance count">

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link
    href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap"
    rel="stylesheet"
  />
  <script>
    (function() {
      try {
        var savedTheme = localStorage.getItem('theme') || 'blue';
        if (savedTheme === 'random') {
          var raw = localStorage.getItem('themeRandomVars');
          if (raw) {
            try {
              var vars = JSON.parse(raw);
              var root = document.documentElement;
              if (vars.blue) root.style.setProperty('--blue', vars.blue);
              if (vars.blueDark) root.style.setProperty('--blue-dark', vars.blueDark);
              if (vars.blueDarker) root.style.setProperty('--blue-darker', vars.blueDarker);
              if (vars.text) root.style.setProperty('--text', vars.text);
            } catch (e) {}
          } else {
            savedTheme = 'blue';
          }
        }
        document.documentElement.setAttribute('data-theme', savedTheme);
      } catch (e) {}
    })();
  </script>
  <link rel="stylesheet" href="style.css" />
</head>
<body class="waitlist-body">
  <div id="loading-screen" class="loading-screen">
    <div class="loading-star">✦</div>
  </div>

  <div id="waitlist-page">
    <div class="main-screen">
      <section class="data-section">
        <!-- Native waitlist form -->
        <div class="native-form-container">
          <div class="form-header">
            <h1 class="form-title">MORE BUTTS?</h1>
            <p class="form-description">SOON WE'LL BE ADDING MORE BUTTS TO THE COUNT. BE ONE OF THE FIRST TO JOIN.</p>
          </div>
          
          <form id="waitlist-form" class="native-form" netlify data-netlify="true" name="waitlist" action="/thank-you.html">
            <div class="form-group">
              <label for="name">NAME</label>
              <input type="text" id="name" name="name" required>
            </div>
            
            <div class="form-group">
              <label for="work-email">WORK EMAIL</label>
              <input type="email" id="work-email" name="work_email" required>
            </div>
            
            <div class="form-group">
              <label for="org-name">ORG / THEATER / SCHOOL NAME</label>
              <input type="text" id="org-name" name="org_name" required>
            </div>
            
            <div class="form-group">
              <label for="city-region">CITY / REGION</label>
              <input type="text" id="city-region" name="city_region" required>
            </div>
            
            <button type="submit" class="submit-btn">
              COUNT ME IN
            </button>
          </form>
        </div>
        
      </section>
    </div>

    <footer class="metadata">
      <div class="footer-left">
        <a href="/" class="waitlist-cta">BACK TO BUTTS</a>
      </div>
      
      <div class="footer-center">
      </div>
      
      <div class="footer-right">
        <div class="fourth-wall-attribution" style="opacity: 0.8;">
          A <a href="http://fourthwall.news" target="_blank" rel="noopener noreferrer"><strong>Fourth Wall</strong></a> Project
        </div>
      </div>
    </footer>
  </div>


  <script>
    class WaitlistPage {
      constructor() {
        this.init();
      }

      async init() {
        this.hideLoadingScreen();
      }

      hideLoadingScreen() {
        const loadingScreen = document.getElementById('loading-screen');
        setTimeout(() => {
          loadingScreen.classList.add('hidden');
          setTimeout(() => {
            loadingScreen.remove();
          }, 500);
        }, 800);
      }

      setupThemeSelector() {
        const root = document.documentElement;
        const themeOptions = document.querySelectorAll('.theme-option');
        
        // Get available themes from the DOM
        const availableThemes = Array.from(themeOptions).map(option => option.dataset.theme);
        
        // Load saved theme or default to blue, but ensure it's valid
        const savedTheme = localStorage.getItem("theme") || "blue";
        const validTheme = availableThemes.includes(savedTheme) ? savedTheme : "blue";
        root.setAttribute("data-theme", validTheme);
        
        // Set active state for current theme
        const updateActiveTheme = (activeTheme) => {
          themeOptions.forEach(option => {
            option.classList.toggle('active', option.dataset.theme === activeTheme);
          });
        };
        
        updateActiveTheme(validTheme);
        
        // Add click handlers for theme options
        themeOptions.forEach(option => {
          option.addEventListener('click', () => {
            const newTheme = option.dataset.theme;
            
            // Clear any custom CSS properties from random themes
            root.style.removeProperty('--blue');
            root.style.removeProperty('--blue-dark');
            root.style.removeProperty('--blue-darker');
            root.style.removeProperty('--text');
            
            // Set the theme
            root.setAttribute("data-theme", newTheme);
            localStorage.setItem("theme", newTheme);
            updateActiveTheme(newTheme);
          });
        });
      }

      setupShuffleTheme() {
        const shuffleButton = document.getElementById('shuffle-theme');
        shuffleButton.addEventListener('click', () => {
          // Add spin animation
          shuffleButton.classList.add('spinning');
          
          // Remove animation class after it completes
          setTimeout(() => {
            shuffleButton.classList.remove('spinning');
          }, 400);
          
          this.generateRandomTheme();
        });
      }

      async generateRandomTheme() {
        // Generate diverse, appealing color directly without API dependency
        this.generateDiverseTheme();
      }

      darkenColor(rgb, factor) {
        const [r, g, b] = rgb;
        return `rgb(${Math.floor(r * factor)}, ${Math.floor(g * factor)}, ${Math.floor(b * factor)})`;
      }

      applyRandomTheme(color1, color2, color3, textColor) {
        const root = document.documentElement;
        
        // Apply CSS custom properties
        root.style.setProperty('--blue', color1);
        root.style.setProperty('--blue-dark', color2);
        root.style.setProperty('--blue-darker', color3);
        root.style.setProperty('--text', textColor);
        
        // Set data-theme to trigger any theme-specific styles
        document.documentElement.setAttribute('data-theme', 'random');
        
        // Clear active state from theme options
        document.querySelectorAll('.theme-option').forEach(option => {
          option.classList.remove('active');
        });
        
        // Highlight shuffle button briefly
        const shuffleButton = document.getElementById('shuffle-theme');
        shuffleButton.style.background = 'rgba(255, 255, 255, 0.4)';
        setTimeout(() => {
          shuffleButton.style.background = 'rgba(255, 255, 255, 0.1)';
        }, 300);
      }

      generateDiverseTheme() {
        // Initialize or retrieve recent colors from session storage
        if (!this.recentColors) {
          this.recentColors = JSON.parse(sessionStorage.getItem('recentColors') || '[]');
        }
        
        let attempts = 0;
        let newHue;
        
        // Try to find a hue that's different from recent colors
        do {
          newHue = Math.floor(Math.random() * 360);
          attempts++;
        } while (attempts < 20 && this.isTooSimilarToRecent(newHue));
        
        // Curated ranges for appealing colors
        const saturationRanges = [
          [65, 85],   // Vibrant but not overwhelming
          [45, 65],   // Rich and sophisticated
          [75, 90]    // Bold and energetic
        ];
        
        const lightnessRanges = [
          [35, 50],   // Deep and rich
          [50, 65],   // Balanced and pleasant
          [40, 55]    // Warm and inviting
        ];
        
        // Randomly select ranges for variety
        const satRange = saturationRanges[Math.floor(Math.random() * saturationRanges.length)];
        const lightRange = lightnessRanges[Math.floor(Math.random() * lightnessRanges.length)];
        
        const saturation = satRange[0] + Math.random() * (satRange[1] - satRange[0]);
        const lightness = lightRange[0] + Math.random() * (lightRange[1] - lightRange[0]);
        
        // Generate color variations
        const color1 = `hsl(${newHue}, ${saturation}%, ${lightness}%)`;
        const color2 = `hsl(${newHue}, ${Math.max(saturation - 10, 30)}%, ${Math.max(lightness - 12, 25)}%)`;
        const color3 = `hsl(${newHue}, ${Math.max(saturation - 15, 25)}%, ${Math.max(lightness - 20, 20)}%)`;
        
        // Store this hue for future diversity checks
        this.recentColors.push(newHue);
        if (this.recentColors.length > 8) {
          this.recentColors.shift(); // Keep only last 8 colors
        }
        sessionStorage.setItem('recentColors', JSON.stringify(this.recentColors));
        
        this.applyRandomTheme(color1, color2, color3, '#ffffff');
      }
      
      isTooSimilarToRecent(newHue) {
        if (!this.recentColors || this.recentColors.length === 0) return false;
        
        return this.recentColors.some(recentHue => {
          // Calculate hue distance (accounting for circular nature of hue)
          const distance = Math.min(
            Math.abs(newHue - recentHue),
            360 - Math.abs(newHue - recentHue)
          );
          return distance < 45; // Require at least 45° difference
        });
      }

    }

    // Initialize when DOM is loaded
    document.addEventListener('DOMContentLoaded', () => {
      new WaitlistPage();
    });
  </script>
</body>
</html>